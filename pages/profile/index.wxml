<!--pages/profile/index.wxml-->
<view class="container">
  <!-- 用户信息卡片 -->
  <view class="user-card">
    <view class="user-info">
      <image class="avatar" src="{{isLogin ? userInfo.avatarUrl : '/images/icons/user.png'}}" mode="aspectFill" />
      <view class="user-detail">
        <text class="nickname">{{isLogin ? userInfo.nickName : '未登录'}}</text>
        <text class="community" wx:if="{{isLogin}}">{{userInfo.department || '飞书社区'}}</text>
      </view>
      <view class="edit-btn" wx:if="{{isLogin}}" bindtap="editProfile">
        <text class="edit-text">编辑</text>
      </view>
    </view>
    <!-- 修改登录按钮，使用open-type="getPhoneNumber" -->
    <button wx:if="{{!isLogin}}" class="login-btn" bindtap="handleLogin">点击登录</button>
    <!-- 在实际项目中应该使用以下代码获取真实手机号 -->
    <!-- <button wx:if="{{!isLogin}}" class="login-btn" open-type="getPhoneNumber" bindgetphonenumber="onGetPhoneNumber">点击登录</button> -->
  </view>

  <!-- 功能模块列表 -->
  <view class="section-title">功能模块</view>
  <view class="menu-list">
    <view class="menu-item" wx:for="{{menuList}}" wx:key="id" wx:if="{{index < 4}}" data-url="{{item.url}}" bindtap="handleMenuTap">
      <view class="menu-item-left">
        <image class="menu-icon" src="{{item.icon}}" mode="aspectFit" />
        <text class="menu-text">{{item.text}}</text>
      </view>
      <image class="arrow-icon" src="/images/icons/arrow-right.png" mode="aspectFit" />
    </view>
  </view>
  
  <!-- 系统设置项 -->
  <view class="section-title">系统设置</view>
  <view class="menu-list">
    <view class="menu-item" wx:for="{{menuList}}" wx:key="id" wx:if="{{index >= 4}}" data-url="{{item.url}}" bindtap="handleMenuTap">
      <view class="menu-item-left">
        <image class="menu-icon" src="{{item.icon}}" mode="aspectFit" />
        <text class="menu-text">{{item.text}}</text>
      </view>
      <image class="arrow-icon" src="/images/icons/arrow-right.png" mode="aspectFit" />
    </view>
  </view>
  
  <!-- 退出登录按钮 -->
  <view class="logout-section" wx:if="{{isLogin}}">
    <button class="logout-btn" bindtap="logout">退出登录</button>
  </view>
</view>